(this["webpackJsonpcontentmunch-blog"]=this["webpackJsonpcontentmunch-blog"]||[]).push([[0],{304:function(e,t,n){},321:function(e,t,n){},352:function(e,t,n){},353:function(e,t,n){},378:function(e,t){},396:function(e,t,n){},588:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(0),o=n.n(i),a=n(95),s=n.n(a),r=n(21),l=n(31),d=n(8),j=n(25),u=(n(304),n(32)),h=n(20),b=n(205),O=n.n(b).a.create({baseURL:"https://www.contentmunch.com/api/"}),x=function(e){for(var t,n,c=(new DOMParser).parseFromString("<div>"+e+"</div>","text/html"),i="",o=0;o<c.documentElement.childNodes.length;o++){var a=c.documentElement.childNodes[o];if(a.textContent&&""!==a.textContent){i=a.textContent;break}}return n||(n=150),(t=i).length>n?t.substring(0,n)+"...":t},f=function(e){return O.get("articles/"+e+"?projection=withId").then((function(e){return e.data}))},m=(n(321),n(52)),v=n.n(m),p=n(4),g=function(e){var t=e.article,n=Object(d.k)(),i=Object(j.useOktaAuth)().authState;return Object(c.jsxs)("div",{className:"article-card",children:[Object(c.jsx)("h2",{children:Object(c.jsx)(l.Link,{to:"/articles/"+t.id,children:t.title})}),Object(c.jsx)("p",{children:x(t.content)}),Object(c.jsx)("div",{className:"article-card--footer",children:Object(c.jsxs)("p",{children:["Created ",v()(t.createdAt).endOf("day").fromNow(),(null===i||void 0===i?void 0:i.isAuthenticated)?Object(c.jsx)(p.Button,{size:"small",onClick:function(){n.push("/articles/"+t.id+"/edit")},children:Object(c.jsx)(p.Icon,{name:"edit"})}):""]})})]})},w=(n(80),function(){var e=Object(i.useState)([]),t=Object(h.a)(e,2),n=t[0],o=t[1];return Object(i.useEffect)((function(){var e;(e=5,O.get("articles?projection=withId&sort=createdAt,desc&size="+e).then((function(e){return e.data._embedded.articles}))).then((function(e){o(e)}))}),[]),Object(c.jsx)("main",{children:Object(c.jsx)("section",{className:"section-home container",children:n.map((function(e){return Object(c.jsx)(g,{article:e},e.id)}))})})}),k=function(){return Object(c.jsxs)("main",{children:[Object(c.jsx)(u.a,{children:Object(c.jsx)("title",{children:"Resource Not Found"})}),Object(c.jsx)("section",{className:"section-align--center",children:Object(c.jsx)("h2",{children:"Uh-oh, this is a 404"})})]})},C="/implicit/callback",S="https://".concat("auth.contentmunch.com","/oauth2/default"),y=window.location.host,N={issuer:S,clientId:"0oakabbaYBaBrYgFf5d5",redirectUri:"http://".concat(y).concat(C),scopes:["openid","profile","email"],pkce:!0},I=(n(352),n(353),function(){var e=Object(i.useState)(""),t=Object(h.a)(e,2),n=t[0],o=t[1],a=function(){console.log("search button clicked")};return Object(c.jsxs)("div",{className:"search-bar",children:[Object(c.jsx)(p.Input,{name:"query",placeholder:"Search articles",onKeyDown:function(e){"Enter"===e.key&&""!==n&&a()},onChange:function(e){o(e.target.value)},icon:"type"}),Object(c.jsx)(p.Button,{title:"Search",variant:"secondary",disabled:""===n,onClick:a,children:Object(c.jsx)(p.Icon,{name:"search"})})]})}),B=function(){var e=Object(j.useOktaAuth)(),t=e.authState,n=e.authService,o=Object(i.useState)(""),a=Object(h.a)(o,2),s=a[0],r=a[1],l="".concat(window.location.origin),u=Object(i.useState)(!1),b=Object(h.a)(u,2),O=b[0],x=b[1],f=Object(d.k)();return Object(i.useEffect)((function(){(null===t||void 0===t?void 0:t.isAuthenticated)&&(null===n||void 0===n||n.getUser().then((function(e){r(null===e||void 0===e?void 0:e.name)})))}),[n,t]),Object(c.jsx)("header",{className:"header",children:Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("nav",{children:[Object(c.jsx)("a",{href:"https://www.contentmunch.com","data-title":"Contentmunch.com home",children:Object(c.jsx)(p.Icon,{name:"muncher",weight:1})}),Object(c.jsx)("div",{className:"header-search",children:Object(c.jsx)(I,{})}),t.isAuthenticated?Object(c.jsx)(p.DropdownButton,{size:"small",title:"Hello "+s+"!",element:Object(c.jsx)(p.Icon,{name:"user",weight:1}),showContent:O,setShowContent:x,children:Object(c.jsxs)("div",{className:"header-dropdown--content",children:[Object(c.jsxs)(p.Button,{size:"small",title:"Edit",variant:"secondary",onClick:function(){return f.push("/articles/new/edit")},children:[Object(c.jsx)(p.Icon,{name:"edit",weight:1})," Create"]}),Object(c.jsxs)(p.Button,{size:"small",title:"Logout",variant:"secondary",onClick:function(){n.logout("/"),window.location.href="".concat(N.issuer,"/v1/logout?id_token_hint=").concat(t.idToken,"&post_logout_redirect_uri=").concat(l)},children:[Object(c.jsx)(p.Icon,{name:"log-out",weight:1})," Log Out"]})]})}):Object(c.jsx)(p.Button,{size:"small",title:"Login",onClick:function(){return n.login("/")},children:Object(c.jsx)(p.Icon,{name:"log-in",weight:1})})]})})})},A=function(){return Object(c.jsx)("footer",{children:Object(c.jsx)("div",{className:"container",children:" Footer"})})},E=n(206),L=n.n(E),F=(n(396),function(e){var t=e.content;return Object(c.jsx)("div",{className:"article-content",children:t?L()(t):""})}),z=function(){var e=Object(i.useState)(),t=Object(h.a)(e,2),n=t[0],o=t[1],a=Object(d.m)();return Object(i.useEffect)((function(){f(a.id).then((function(e){o(e)}))}),[a]),Object(c.jsxs)("main",{children:[Object(c.jsx)(u.a,{children:Object(c.jsx)("title",{children:null===n||void 0===n?void 0:n.title})}),Object(c.jsxs)("section",{className:"section-home container",children:[Object(c.jsx)("h2",{children:null===n||void 0===n?void 0:n.title}),Object(c.jsx)(F,{content:null===n||void 0===n?void 0:n.content}),Object(c.jsxs)("p",{children:["keywords: ",null===n||void 0===n?void 0:n.keywords]}),Object(c.jsxs)("p",{children:["status: ",null===n||void 0===n?void 0:n.status]}),Object(c.jsxs)("p",{children:["Created ",v()(null===n||void 0===n?void 0:n.createdAt).endOf("day").fromNow()]}),Object(c.jsxs)("p",{children:["LastModified ",v()(null===n||void 0===n?void 0:n.lastModifiedAt).endOf("day").fromNow()]})]})]})},M=n(98),_=function(){var e=Object(i.useState)(!0),t=Object(h.a)(e,2),n=t[0],o=t[1],a=Object(i.useState)({title:"",keywords:""}),s=Object(h.a)(a,2),l=s[0],b=s[1],x=Object(j.useOktaAuth)().authState,m=Object(d.m)();Object(i.useEffect)((function(){f(m.id).then((function(e){b(e),o(!1)}))}),[m]);return Object(c.jsxs)("main",{children:[Object(c.jsx)(u.a,{children:Object(c.jsxs)("title",{children:["Edit: ",l.title]})}),Object(c.jsxs)("section",{className:"container",children:[Object(c.jsx)(p.Input,{name:"title",placeholder:"Title",value:l.title,onChange:function(e){b(Object(r.a)(Object(r.a)({},l),{},{title:e.target.value}))}}),n?Object(c.jsx)(M.MuncherSkeleton,{}):Object(c.jsx)(M.Muncher,{content:l.content,setContent:function(e){b(Object(r.a)(Object(r.a)({},l),{},{content:e}))},saveHandler:function(){(function(e,t){return O.patch("articles/"+e.id,Object(r.a)({},e),function(e){return{headers:{Authorization:"Bearer "+e}}}(t)).then((function(e){return e.data}))})(l,x.idToken).then((function(e){b(e)}))},deleteHandler:function(){console.log("delete the document")}}),Object(c.jsx)(p.Input,{name:"keywords",placeholder:"Keywords",value:l.keywords,onChange:function(e){b(Object(r.a)(Object(r.a)({},l),{},{keywords:e.target.value}))}})]})]})},T=function(){return Object(c.jsx)(u.b,{children:Object(c.jsx)(l.BrowserRouter,{children:Object(c.jsxs)(j.Security,Object(r.a)(Object(r.a)({},N),{},{children:[Object(c.jsx)(B,{}),Object(c.jsxs)(d.g,{children:[Object(c.jsx)(d.d,{exact:!0,path:C,component:j.LoginCallback}),Object(c.jsx)(d.d,{exact:!0,path:"/",children:Object(c.jsx)(w,{})}),Object(c.jsx)(d.d,{exact:!0,path:"/articles/:id",children:Object(c.jsx)(z,{})}),Object(c.jsx)(j.SecureRoute,{exact:!0,path:"/articles/:id/edit",children:Object(c.jsx)(_,{})}),Object(c.jsx)(d.d,{path:"*",children:Object(c.jsx)(k,{})})]}),Object(c.jsx)(A,{})]}))})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,589)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),o(e),a(e)}))};s.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(T,{})}),document.getElementById("root")),D()},80:function(e,t,n){}},[[588,1,2]]]);
//# sourceMappingURL=main.501ce034.chunk.js.map